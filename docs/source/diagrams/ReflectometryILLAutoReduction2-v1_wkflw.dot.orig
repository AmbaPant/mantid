digraph ReflectometryILLPreprocess {
<<<<<<< Updated upstream
  label = "ReflectometryILLAutoReduction"
=======
  label = "ReflectometryILLAutoReduction finalizing"
>>>>>>> Stashed changes
  $global_style

  subgraph params {
    $param_style
<<<<<<< Updated upstream
    output        [label="OutputWorkspace"]
    summationType [label="SummationType"]
    polEffFile    [label="Polarization efficiency file"]
    direct        [label="Direct beam pre-processed"]
    reflected     [label="Reflected beam pre-processed"]
=======
    output            [label="OutputWorkspace"]
    summationType     [label="SummationType"]
    polEffFile        [label="Polarization efficiency file"]
    preDirect         [label="Pre-processed direct beam"]
    preReflected      [label="Pre-processed reflected beam"]
    nextAngle         [label="Next angle"]
    nextReflectedRun  [label="Next reflected run"]
>>>>>>> Stashed changes
  }

  subgraph algorithms {
    $algorithm_style
    convertToQ                      [label="ReflectometryILLConvertToQ"]
    polarizationCorrectionDirect    [label="ReflectometryILLPolarizationCor"]
    polarizationCorrectionReflected [label="ReflectometryILLPolarizationCor"]
    sumForegroundDirect             [label="ReflectometryILLSumForeground"]
    sumForegroundReflected          [label="ReflectometryILLSumForeground"]
<<<<<<< Updated upstream
=======
    scale                           [label="Scale"]
>>>>>>> Stashed changes
    stitch                          [label="Stitch1DMany"]
  }

  subgraph decisions {
    $decision_style
    isPolarizedDirect    [label="Perform polarization corrections?"]
    isPolarizedReflected [label="Perform polarization corrections?"]
    readyForStitch       [label="All angles processed?"]
    allReflAngles        [label="All reflected beams of single angle processed?"]
  }

<<<<<<< Updated upstream
  direct                          -> sumForegroundDirect
  reflected                       -> sumForegroundReflected
=======
  preDirect                       -> sumForegroundDirect
  preReflected                    -> sumForegroundReflected
>>>>>>> Stashed changes
  sumForegroundDirect             -> isPolarizedDirect
  sumForegroundReflected          -> isPolarizedReflected
  isPolarizedDirect               -> polarizationCorrectionDirect    [label="Yes"]
  isPolarizedReflected            -> allReflAngles                   [label="Yes"]
  polEffFile                      -> polarizationCorrectionDirect
  polEffFile                      -> polarizationCorrectionReflected
  allReflAngles                   -> polarizationCorrectionReflected [label="Yes"]
<<<<<<< Updated upstream
=======
  allReflAngles                   -> nextReflectedRun                [label="No"]
>>>>>>> Stashed changes
  polarizationCorrectionDirect    -> convertToQ
  polarizationCorrectionReflected -> convertToQ
  isPolarizedDirect               -> convertToQ                      [label="No"]
  isPolarizedReflected            -> convertToQ                      [label="No"]
  summationType                   -> convertToQ
  convertToQ                      -> readyForStitch
  readyForStitch                  -> stitch                          [label="Yes"]
<<<<<<< Updated upstream
  stitch                          -> output
=======
  readyForStitch                  -> nextAngle                       [label="No"]
  stitch                          -> scale
  scale                           -> output
>>>>>>> Stashed changes
}
